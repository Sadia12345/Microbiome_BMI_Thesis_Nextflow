executor {
    name = 'local'
    queueSize = 1
}

process {
    executor = 'local'
    // Limit to 1 process at a time to save memory on 8GB machine
    maxForks = 1 
    errorStrategy = 'retry'
    maxRetries = 2
    
    // Configure environment for Conda-based R and Java
    beforeScript = '''
        export JAVA_HOME=/Users/tahmid_23/miniconda3/envs/mikropml_env_v2/lib/jvm
        export PATH=/Users/tahmid_23/miniconda3/envs/mikropml_env_v2/bin:$JAVA_HOME/bin:$PATH
        export OMP_NUM_THREADS=2
    '''
}
